function $parcel$export(e,t,n,r){Object.defineProperty(e,t,{get:n,set:r,enumerable:!0,configurable:!0})}var $parcel$global="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},parcelRequire=$parcel$global.parcelRequire55a5;parcelRequire.register("aYlFN",(function(module,exports){$parcel$export(module.exports,"Sync",(function(){return Sync}));var $5Owdb=parcelRequire("5Owdb"),joinRoom={nostr:null,mqtt:null,torrent:null};class Sync extends $5Owdb.Sync{destroy(){this.connection&&this.connection.leave(),super.destroy()}async connect(data){if(super.connect(data),joinRoom[this.backend])this.init(!0);else switch(this.backend){case"nostr":parcelRequire("92PmE").then((e=>{joinRoom.nostr=e.joinRoom,this.init(!0)})).catch((e=>{this.init(!1,e.message)}));break;case"mqtt":parcelRequire("4kim4").then((e=>{joinRoom.mqtt=e.joinRoom,this.init(!0)})).catch((e=>{this.init(!1,e.message)}));break;case"torrent":eval("import('./trystero-ipfs.min.js')\n.then((e) => {\n  joinRoom.torrent = e.joinRoom\n  this.init(true)\n})\n.catch((e) => {\n  this.init(false, e.message)\n})")}}init(e,t){const n=this.uniqueID();if(e&&n){const e={appId:"liascript"};this.password&&(e.password=this.password);const t=JSON.parse('{"iceServers":[{"urls":"stun:stun.relay.metered.ca:80"},{"urls":"turn:standard.relay.metered.ca:80","username":"5cedc2adff8a8f714555bd79","credential":"azL7pmqh8DkgS50Y"},{"urls":"turn:standard.relay.metered.ca:80?transport=tcp","username":"5cedc2adff8a8f714555bd79","credential":"azL7pmqh8DkgS50Y"},{"urls":"turn:standard.relay.metered.ca:443","username":"5cedc2adff8a8f714555bd79","credential":"azL7pmqh8DkgS50Y"},{"urls":"turns:standard.relay.metered.ca:443?transport=tcp","username":"5cedc2adff8a8f714555bd79","credential":"azL7pmqh8DkgS50Y"}]}');t&&(e.rtcConfig=t),this.connection=joinRoom[this.backend](e,n),this.connection.onPeerJoin((e=>console.log(`${e} joined`))),this.connection.onPeerLeave((e=>console.log(`${e} left`)));const[r,s]=this.connection.makeAction("message");this.pub=r,this.sub=s;const i=this;this.sub(((e,t)=>{if(e)try{const[t,n,r]=e;if(t){if(null===n)return;r==i.db.timestamp?i.applyUpdate($5Owdb.base64_to_unit8(n)):r>i.db.timestamp?i.broadcast(!0,i.db.encode()):(i.db.timestamp=r,i.applyUpdate($5Owdb.base64_to_unit8(n),!0))}else i.pubsubReceive($5Owdb.base64_to_unit8(n))}catch(e){console.warn(i.backend,e.message)}})),this.sendConnect()}else{let e=this.backend+" unknown error";t&&(e="Could not load resource: "+t),this.sendDisconnectError(e)}}broadcast(e,t){if(!this.publish)return;const n=null==t?null:$5Owdb.uint8_to_base64(t);this.pub([e,n,this.db.timestamp])}constructor(e,t,n,r,s,i=!1,o=!0){super(t,n,r,s,i,o),this.backend=e}}})),parcelRequire.register("92PmE",(function(e,t){e.exports=import("./"+parcelRequire("abmWv").resolve("lYuyw")).then((()=>parcelRequire("g9MJ9")))})),parcelRequire.register("4kim4",(function(e,t){e.exports=import("./"+parcelRequire("abmWv").resolve("7bLGf")).then((()=>parcelRequire("i0BT1")))}));
!function(e,t,i,n,r){var s="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},o="function"==typeof s[n]&&s[n],a=o.cache||{},c="undefined"!=typeof module&&"function"==typeof module.require&&module.require.bind(module);function l(t,i){if(!a[t]){if(!e[t]){var r="function"==typeof s[n]&&s[n];if(!i&&r)return r(t,!0);if(o)return o(t,!0);if(c&&"string"==typeof t)return c(t);var h=Error("Cannot find module '"+t+"'");throw h.code="MODULE_NOT_FOUND",h}d.resolve=function(i){var n=e[t][1][i];return null!=n?n:i},d.cache={};var u=a[t]=new l.Module(t);e[t][0].call(u.exports,d,u,u.exports,this)}return a[t].exports;function d(e){var t=d.resolve(e);return!1===t?{}:l(t)}}l.isParcelRequire=!0,l.Module=function(e){this.id=e,this.bundle=l,this.exports={}},l.modules=e,l.cache=a,l.parent=o,l.register=function(t,i){e[t]=[function(e,t){t.exports=i},{}]},Object.defineProperty(l,"root",{get:function(){return s[n]}}),s[n]=l;for(var h=0;h<t.length;h++)l(t[h]);if(i){var u=l(i);"object"==typeof exports&&"undefined"!=typeof module?module.exports=u:"function"==typeof define&&define.amd&&define((function(){return u}))}}({"4B3mg":[function(e,t,i){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(i),n.export(i,"initTooltip",(function(){return y}));var r=e("@swc/helpers/_/_class_call_check"),s=e("@swc/helpers/_/_create_class"),o=e("@swc/helpers/_/_inherits"),a=e("@swc/helpers/_/_wrap_native_super"),c=e("@swc/helpers/_/_create_super"),l=e("../embed/index"),h=e("../preview-lia"),u=e("../../helper"),d=e("./html"),f="lia-tooltip",p=/(?:https?:)(?:\/\/)liascript\.github\.io\/course\/\?(.+\.md)/i,v={},g=function(e){(0,o._)(i,e);var t=(0,c._)(i);function i(){var e;return(0,r._)(this,i),(e=t.call(this)).sourceUrl="",e.cache=null,e.isFetching=!1,e.isClicked=!1,e.isActive=!1,e.lightMode=!0,e}return(0,s._)(i,[{key:"connectedCallback",value:function(){this.sourceUrl=this.getAttribute("src")||"",this.sourceUrl&&(this.sourceUrl.endsWith("/")&&(this.sourceUrl=this.sourceUrl.slice(0,-1)),this.container=document.getElementById(f)||void 0,this.container&&this.firstChild&&(this.firstChild.addEventListener("mouseenter",this._onmouseenter),this.firstChild.addEventListener("mouseout",this._onmouseout),this.firstChild.addEventListener("click",this._onclick),this.firstChild.addEventListener("focus",this._onfocus),this.firstChild.addEventListener("focusout",this._onfocusout),this.firstChild.addEventListener("keyup",this._onescape)))}},{key:"disconnectedCallback",value:function(){this.firstChild&&(this.firstChild.removeEventListener("mouseenter",this._onmouseenter),this.firstChild.removeEventListener("mouseout",this._onmouseout),this.firstChild.removeEventListener("click",this._onclick),this.firstChild.removeEventListener("focus",this._onfocus),this.firstChild.removeEventListener("focusout",this._onfocusout),this.firstChild.removeEventListener("keyup",this._onescape))}},{key:"_onclick",value:function(){var e=this.parentElement;e.isActive=!1,e.isClicked=!0}},{key:"_onescape",value:function(e){if("Escape"===e.code){var t=this.parentElement;t.setAttribute("data-active","false"),t.deactivate()}}},{key:"_onmouseenter",value:function(){this.style.cursor="progress";var e=this.getBoundingClientRect();this.parentElement.activate(e.left+e.width/2,e.top+e.height/2)}},{key:"_onmouseout",value:function(){this.parentElement.deactivate()}},{key:"_onfocus",value:function(e){var t=this.getBoundingClientRect();this.parentElement.activate(t.left+t.width/2,t.top+t.height/2)}},{key:"_onfocusout",value:function(){var e=this.parentElement;e.container&&e.container.setAttribute("data-active","false"),e.deactivate()}},{key:"activate",value:function(e,t){var i=this;if(this.container){if(this.isActive=!0,this.isClicked)return void(this.isClicked=!1);if(this.container.style.left="".concat(e-425*e/window.innerWidth,"px"),1.5*t>window.innerHeight?(this.container.style.top="",this.container.style.bottom="".concat(window.innerHeight-t+10,"px")):(this.container.style.top="".concat(t+10,"px"),this.container.style.bottom=""),this.cache)this.show();else if(v[this.sourceUrl])this.cache=v[this.sourceUrl],this.show();else if(!this.isFetching){this.isFetching=!0;var n=this,r=this.sourceUrl.match(p);if(r)h.fetch(r[1],(function(e,t,i,r,s){n.cache=m(n.sourceUrl,t,i,r,s),n.show()}));else try{l.extract(this.sourceUrl,{}).then((function(e){n.cache=m(n.sourceUrl,e.title,void 0,e.thumbnail_url),n.show()})).catch((function(e){!function e(t,i){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(0==n&&t.search(/wikipedia\.org/gi))e(u.PROXY+t,i,1);else{var r=new XMLHttpRequest;r.open("GET",t,!0),r.onload=function(e){if(4===r.readyState&&200===r.status)try{var t=r.responseText;try{t=JSON.parse(t).contents}catch(e){}i(t)}catch(e){console.warn("fetching",e)}},r.onerror=function(r){0===n&&e(u.PROXY+t,i,1)},r.send()}}(i.sourceUrl,(function(e){n.parse(e)}))}))}catch(e){}}}}},{key:"deactivate",value:function(){this.container&&"false"===this.container.getAttribute("data-active")&&(this.isActive=!1,this.container.style.display="none",this.container.style.zIndex="-1000")}},{key:"parse",value:function(e){if(null===this.cache){var t=d.parse(this.sourceUrl,e);if("string"==typeof t.image){var i=t.image.match(/.*?%22(.*)\/%22/);i&&2==i.length&&(t.image=i[1])}this.cache=m(t.url,t.title,t.description,t.image,t.image_alt),""===this.cache&&(this.container=void 0),this.show()}else this.show()}},{key:"show",value:function(){this.container&&this.cache&&this.isActive&&(this.lightMode?(this.container.style.background="white",this.container.style.boxShadow="0 30px 90px -20px rgba(0, 0, 0, 0.3)"):(this.container.style.background="#202020",this.container.style.boxShadow="0 30px 90px -20px rgba(120, 120, 120, 0.3)"),this.container.style.zIndex="20000",this.container.style.display="inline-block",this.container.innerHTML=this.cache),this.firstChild&&(this.firstChild.style.cursor="")}},{key:"light",get:function(){return this.lightMode},set:function(e){this.lightMode!==e&&(this.lightMode=e,this.show())}}]),i}((0,a._)(HTMLElement));function m(e,t,i,n,r){if(!e)return"";e=e.replace(u.PROXY,"");var s="";if(n)try{u.allowedProtocol(n)||(n=new URL(n,e).toString()),r=r?'alt="'.concat(r,'"'):"",s+='<img src="'.concat(n,'" ').concat(r,' style="background-color:white; margin-bottom: 1.5rem;">')}catch(e){}return t&&(s+="<h4>".concat(t,"</h4>")),i&&(s+=i),""!=s&&(s+='<hr style="border: 0px; height:1px; background:#888;"/><a style="font-size:x-small; display:block" href="'.concat(e,'" target="_blank">').concat(e,"</a>")),v[e]=s,s}function y(){document.getElementById(f)||setTimeout((function(){var e=document.createElement("div");e.id=f,e.style.zIndex="-1000",e.style.width="425px",e.style.padding="15px",e.style.background="white",e.style.boxShadow="0 30px 90px -20px rgba(0, 0, 0, 0.3)",e.style.position="fixed",e.style.display="none",e.style.maxHeight="480px",e.style.overflow="auto",e.setAttribute("data-active","true"),e.addEventListener("mouseenter",(function(){e.style.display="inline-block",e.style.zIndex="20000",e.setAttribute("data-active","true")})),e.addEventListener("mouseleave",(function(){e.style.display="none",e.style.zIndex="-1000",e.setAttribute("data-active","false")})),document.body.appendChild(e)}),0)}customElements.define("preview-link",g)},{"@swc/helpers/_/_class_call_check":"aKk2j","@swc/helpers/_/_create_class":"1kStN","@swc/helpers/_/_inherits":"cPJNz","@swc/helpers/_/_wrap_native_super":"iisQt","@swc/helpers/_/_create_super":"4oibw","../embed/index":"1dz6Q","../preview-lia":"f1RDk","../../helper":"16SFj","./html":"6euKg","@parcel/transformer-js/src/esmodule-helpers.js":"1NFta"}],"6euKg":[function(e,t,i){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(i),n.export(i,"parse",(function(){return u}));var r=e("../../helper"),s=/href=[\"'](.*?)[\"']/gi,o=/src=[\"'](.*?)[\"']/gi,a=/alt=[\"'](.*?)[\"']/gi,c=/<h1.*?>(.*?)<\/h1>/gi,l=/<h2.*?>(.*?)<\/h2>/gi,h=/<title>(.*?)<\/title>/gi;function u(e,t){var i=function(e){var t=f("og:image",e);if(t)return{url:t,alt:f("og:image:alt",e)};var i=d(/<link.*?rel=[\"']image_src[\"'].*?>/gi,e);if(i)return{url:d(s,i)};var n=f("twitter:image",e);if(n)return{url:n,alt:f("twitter:image:alt",e)};var r=d(/<img .*?>/gi,e);return r?{url:d(o,r),alt:d(a,r)}:{}}(t),n=new URL(d(/<base.*?href\s*=\s*[\"'](.*?)[\"']>/gi,t)||e);return{url:e,title:function(e){var t=f("og:title",e);if(t&&t.length>0)return t;var i=f("twitter:title",e);if(i&&i.length>0)return i;var n=d(h,e);if(n&&n.length>0)return n;var r=d(c,e);if(r&&r.length>0)return r;var s=d(l,e);return s&&s.length>0?s:void 0}(t),description:function(e,t){var i=f("og:description",t);if(i&&i.length>0)return i;var n=f("twitter:description",t);if(n&&n.length>0)return n;var s=d(/<meta.*?name=[\"']description[\"'].*?>/gi,t);if(s){var o=d(/content=[\"'](.*?)[\"']/gi,s);if(o&&o.length>0)return o}var a=d(/<p>([\s\S]+?)<\/p>/gi,t);return a?a.replace(/(href|src)\s*=\s*[\"'].*?[\"']/g,(function(t){var i,n,s,o;return n=(i=t).search(/[\"']/),i.startsWith("href")&&(i+=' target="blank_"'),s=i.slice(0,n+1),o=i.slice(n+1),r.allowedProtocol(s)||o.startsWith("//")?i:o.startsWith("/")?s+e.origin+o:o.startsWith("#")?s+e.href+o:s+e.origin+"/"+o})):void 0}(n,t),image:i.url,image_alt:i.alt}}function d(e,t){var i=t.matchAll(e).next();return i.value?i.value[i.value.length-1]:void 0}function f(e,t){var i=d(RegExp("<meta[^>]+?property=[\"']".concat(e,"[\"'][^>]*?>"),"gi"),t);if(i)return d(/content=[\"'](.*?)[\"']/gi,i)}},{"../../helper":"16SFj","@parcel/transformer-js/src/esmodule-helpers.js":"1NFta"}]},["4B3mg"],"4B3mg","parcelRequire55a5");

var e=("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{}).parcelRequire55a5;e.register("2W8Mt",(function(t,n){var i,o,s,c;i=t.exports,o="Sync",s=()=>h,Object.defineProperty(i,o,{get:s,set:c,enumerable:!0,configurable:!0});var r,a=e("3btRb");class h extends a.Sync{constructor(e,t,n,i,o,s=!1,c=!0){super(t,n,i,o,s,c),this.backend=e}destroy(){this.connection&&this.connection.leave(),super.destroy()}async connect(t){if(super.connect(t),r)this.init(!0);else switch(this.backend){case"nostr":e("e12MK").then((e=>{r=e.joinRoom,this.init(!0)})).catch((e=>{this.init(!1,e.message)}));break;case"mqtt":e("eeIyp").then((e=>{r=e.joinRoom,this.init(!0)})).catch((e=>{this.init(!1,e.message)}));break;case"torrent":e("a0KAi").then((e=>{r=e.joinRoom,this.init(!0)})).catch((e=>{this.init(!1,e.message)}))}}init(e,t){const n=this.uniqueID();if(e&&n){this.connection=r({appId:"liascript"},n),this.connection.onPeerJoin((e=>console.log(`${e} joined`))),this.connection.onPeerLeave((e=>console.log(`${e} left`)));const[e,t]=this.connection.makeAction("message");this.pub=e,this.sub=t;const i=this;this.sub(((e,t)=>{if(e)try{const[t,n]=e;null!=n&&(t?i.applyUpdate(a.base64_to_unit8(n)):i.pubsubReceive(a.base64_to_unit8(n)))}catch(e){console.warn(i.backend,e.message)}})),this.sendConnect()}else{let e=this.backend+" unknown error";t&&(e="Could not load resource: "+t),this.sendDisconnectError(e)}}broadcast(e,t){if(!this.publish)return;const n=null==t?null:a.uint8_to_base64(t);this.pub([e,n])}}})),e.register("e12MK",(function(t,n){t.exports=import("./"+e("1oht4").resolve("8pJXt")).then((()=>e("ciytV")))})),e.register("eeIyp",(function(t,n){t.exports=import("./"+e("1oht4").resolve("fFNrq")).then((()=>e("gtpvH")))})),e.register("a0KAi",(function(t,n){t.exports=import("./"+e("1oht4").resolve("hA33i")).then((()=>e("1OA9Q")))}));
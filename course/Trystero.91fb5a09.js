!function(){var n=("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{}).parcelRequire55a5;n.register("lCGwp",(function(e,t){var i,o,u,r;i=e.exports,o="Sync",u=function(){return y},Object.defineProperty(i,o,{get:u,set:r,enumerable:!0,configurable:!0});var c,a=n("hnmIs"),s=n("9Klpk"),l=n("3bWnf"),f=n("9WzNc"),d=n("div3d"),h=n("kb0qF"),b=n("5ENmm"),v=n("bWNdT"),g=n("32Euv"),p=n("auvHb"),y=function(e){"use strict";(0,h.default)(i,e);var t=(0,v.default)(i);function i(n,e,o,u,r){var c,a=arguments.length>5&&void 0!==arguments[5]&&arguments[5],l=!(arguments.length>6&&void 0!==arguments[6])||arguments[6];return(0,s.default)(this,i),(c=t.call(this,e,o,u,r,a,l)).backend=n,c}return(0,l.default)(i,[{key:"destroy",value:function(){this.connection&&this.connection.leave(),(0,f.default)((0,d.default)(i.prototype),"destroy",this).call(this)}},{key:"connect",value:function(e){var t=this,o=this;return(0,a.default)((function(){return(0,g.__generator)(this,(function(u){if((0,f.default)((0,d.default)(i.prototype),"connect",t).call(o,e),c)return o.init(!0),[2];switch(o.backend){case"nostr":n("5ZdQa").then((function(n){c=n.joinRoom,o.init(!0)})).catch((function(n){o.init(!1,n.message)}));break;case"mqtt":n("8G6Vu").then((function(n){c=n.joinRoom,o.init(!0)})).catch((function(n){o.init(!1,n.message)}));break;case"torrent":n("kEbLv").then((function(n){c=n.joinRoom,o.init(!0)})).catch((function(n){o.init(!1,n.message)}))}return[2]}))}))()}},{key:"init",value:function(n,e){var t=this.uniqueID();if(n&&t){this.connection=c({appId:"liascript"},t),this.connection.onPeerJoin((function(n){return console.log("".concat(n," joined"))})),this.connection.onPeerLeave((function(n){return console.log("".concat(n," left"))}));var i=(0,b.default)(this.connection.makeAction("message"),2),o=i[0],u=i[1];this.pub=o,this.sub=u;var r=this;this.sub((function(n,e){if(n)try{var t=(0,b.default)(n,2),i=t[0],o=t[1];null!=o&&(i?r.applyUpdate(p.base64_to_unit8(o)):r.pubsubReceive(p.base64_to_unit8(o)))}catch(n){console.warn(r.backend,n.message)}})),this.sendConnect()}else{var a=this.backend+" unknown error";e&&(a="Could not load resource: "+e),this.sendDisconnectError(a)}}},{key:"broadcast",value:function(n,e){if(this.publish){var t=null==e?null:p.uint8_to_base64(e);this.pub([n,t])}}}]),i}(p.Sync)})),n.register("5ZdQa",(function(e,t){e.exports=n("3OMJO")(n("5B9gS").getBundleURL("bFNS0")+n("b9xd4").resolve("6gAOH")).then((function(){return n("1UDrq")}))})),n.register("8G6Vu",(function(e,t){e.exports=n("3OMJO")(n("5B9gS").getBundleURL("bFNS0")+n("b9xd4").resolve("7U1md")).then((function(){return n("aB40U")}))})),n.register("kEbLv",(function(e,t){e.exports=n("3OMJO")(n("5B9gS").getBundleURL("bFNS0")+n("b9xd4").resolve("jnhCd")).then((function(){return n("E0fFs")}))}))}();
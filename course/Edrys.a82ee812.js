!function(e,t,n,r,s){var o="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},c="function"==typeof o[r]&&o[r],i=c.cache||{},a="undefined"!=typeof module&&"function"==typeof module.require&&module.require.bind(module);function l(t,n){if(!i[t]){if(!e[t]){var s="function"==typeof o[r]&&o[r];if(!n&&s)return s(t,!0);if(c)return c(t,!0);if(a&&"string"==typeof t)return a(t);var u=Error("Cannot find module '"+t+"'");throw u.code="MODULE_NOT_FOUND",u}d.resolve=function(n){var r=e[t][1][n];return null!=r?r:n},d.cache={};var _=i[t]=new l.Module(t);e[t][0].call(_.exports,d,_,_.exports,this)}return i[t].exports;function d(e){var t=d.resolve(e);return!1===t?{}:l(t)}}l.isParcelRequire=!0,l.Module=function(e){this.id=e,this.bundle=l,this.exports={}},l.modules=e,l.cache=i,l.parent=c,l.register=function(t,n){e[t]=[function(e,t){t.exports=n},{}]},Object.defineProperty(l,"root",{get:function(){return o[r]}}),o[r]=l;for(var u=0;u<t.length;u++)l(t[u])}({"2Y5Dv":[function(e,t,n){var r=e("@parcel/transformer-js/src/esmodule-helpers.js");r.defineInteropFlag(n),r.export(n,"Sync",(function(){return f}));var s=e("@swc/helpers/_/_async_to_generator"),o=e("@swc/helpers/_/_class_call_check"),c=e("@swc/helpers/_/_create_class"),i=e("@swc/helpers/_/_get"),a=e("@swc/helpers/_/_get_prototype_of"),l=e("@swc/helpers/_/_inherits"),u=e("@swc/helpers/_/_create_super"),_=e("@swc/helpers/_/_ts_generator"),d=e("../Base/index"),p=e("uint8-to-base64"),f=function(e){(0,l._)(n,e);var t=(0,u._)(n);function n(){var e;return(0,o._)(this,n),(e=t.apply(this,arguments)).subject="liasync",e.connected=!1,e}return(0,c._)(n,[{key:"connect",value:function(e){var t=this,r=this;return(0,s._)((function(){return(0,_._)(this,(function(s){return(0,i._)((0,a._)(n.prototype),"connect",t).call(r,e),r.init(!0),[2]}))}))()}},{key:"destroy",value:function(){this.listener&&window.removeEventListener("message",this.listener),(0,i._)((0,a._)(n.prototype),"destroy",this).call(this)}},{key:"init",value:function(e,t){if(e){this.subject=this.room||"liasync";var n=this;this.listener=function(e){try{var t=e.data;"init"===t.subject?t.body&&(n.connected=!0,n.sendConnect()):t.body&&n.applyUpdate((0,p.decode)(t.body))}catch(e){console.warn("Edrys",e.message)}},window.addEventListener("message",this.listener),this.broadcast(null,"init"),setTimeout((function(){n.connected||n.sendDisconnectError("This seems not to be an Edrys classroom")}),2e3)}}},{key:"broadcast",value:function(e,t){window.parent.postMessage({subject:t||this.subject,body:e?(0,p.encode)(e):null},"*")}}]),n}(d.Sync)},{"@swc/helpers/_/_async_to_generator":"9nZrO","@swc/helpers/_/_class_call_check":"aKk2j","@swc/helpers/_/_create_class":"1kStN","@swc/helpers/_/_get":"eIgRj","@swc/helpers/_/_get_prototype_of":"cFXpH","@swc/helpers/_/_inherits":"cPJNz","@swc/helpers/_/_create_super":"4oibw","@swc/helpers/_/_ts_generator":"9rWj2","../Base/index":"5ZLLr","uint8-to-base64":"9J4dR","@parcel/transformer-js/src/esmodule-helpers.js":"1NFta"}]},[],0,"parcelRequire55a5");
